{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "OpenClaw Face R2 Bucket Configuration",
  "bucket": {
    "naming": {
      "pattern": "openclaw-status-[user]",
      "examples": [
        "openclaw-status-alice",
        "openclaw-status-bob",
        "openclaw-status-dev"
      ],
      "notes": "Replace [user] with your OpenClaw username or identifier"
    },
    "permissions": {
      "publicAccess": "read-only",
      "description": "Bucket must be configured for public-read access to allow Dashboard polling"
    }
  },
  "cors": {
    "description": "CORS rules for allowing cross-origin GET requests from Dashboard",
    "rules": [
      {
        "AllowedOrigins": ["*"],
        "AllowedMethods": ["GET"],
        "AllowedHeaders": ["*"],
        "MaxAgeSeconds": 3600,
        "description": "Allow GET requests from any origin for status polling"
      }
    ],
    "consoleInstructions": {
      "cloudflare": [
        "1. Go to R2 > Your Bucket > Settings",
        "2. Scroll to CORS policy",
        "3. Add the policy below:",
        "4. Save changes"
      ]
    }
  },
  "iam": {
    "description": "IAM policy for Hook credentials (least privilege)",
    "policy": {
      "Version": "2012-10-17",
      "Statement": [
        {
          "Sid": "AllowPutStatusJson",
          "Effect": "Allow",
          "Action": [
            "s3:PutObject"
          ],
          "Resource": "arn:aws:s3:::openclaw-status-*/status.json"
        }
      ]
    },
    "notes": [
      "Create a separate R2 API token with these permissions",
      "Do not grant s3:GetObject or s3:ListBucket to the Hook",
      "The Hook only needs PutObject permission for status.json"
    ]
  },
  "environmentVariables": {
    "required": [
      {
        "name": "R2_ACCESS_KEY_ID",
        "description": "R2 API Access Key ID"
      },
      {
        "name": "R2_SECRET_ACCESS_KEY",
        "description": "R2 API Secret Access Key"
      },
      {
        "name": "R2_ENDPOINT",
        "description": "R2 endpoint URL (e.g., https://[account-id].r2.cloudflarestorage.com)"
      },
      {
        "name": "R2_BUCKET",
        "description": "Bucket name matching openclaw-status-[user] pattern"
      }
    ],
    "example": {
      "R2_ACCESS_KEY_ID": "your_access_key_id",
      "R2_SECRET_ACCESS_KEY": "your_secret_access_key",
      "R2_ENDPOINT": "https://abc12345.r2.cloudflarestorage.com",
      "R2_BUCKET": "openclaw-status-alice"
    }
  },
  "object": {
    "key": "status.json",
    "contentType": "application/json",
    "maxSizeBytes": 1024
  }
}